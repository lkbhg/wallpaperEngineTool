# 壁纸处理自动化工具 🎨🖼️

该项目提供了一组 Python 脚本，用于自动化提取、处理和组织壁纸项目文件。工具可以从壁纸项目包（scene.pkg）中提取资源，清理文件并将图像文件组织到适当的目录中。  
**注意：这是自用的工具，输出结果只符合个人习惯，只为提取壁纸图像。不用于R18内容。** ⚠️

## 功能 ✨

- **文件名清理**：删除文件名中的非法字符、控制字符和表情符号。🧹
- **图像处理**：将大图像文件移至根目录，并删除小于指定大小的图像文件。📸
- **RePKG 提取**：自动使用 RePKG 工具提取 scene.pkg 文件中的内容。📦
- **文件夹管理**：自动提取项目的名称，根据特定规则将内容划分到子目录中。📂

## 环境要求 🖥️

- Python 3.6+ 🐍
- RePKG 工具（RePKG.exe）🛠️
- tqdm 库（用于显示进度条）📊

您可以通过 pip 安装所需的 Python 库：

```bash
pip install tqdm
````

这里我使用的是 uv，可以通过 uv sync 来构建环境。⚡

确保在项目目录中拥有 RePKG.exe 可执行文件。📍

## 文件说明 📄

```python
parrel.py
```

该脚本负责并行处理多个壁纸项目文件夹。它提取 `scene.pkg` 文件中的资源并处理图像文件。输出结果将按照配置的每个子文件夹项目数量进行组织。

```python
main.py
```

该脚本按顺序处理每个壁纸项目文件夹，提取 `scene.pkg` 文件中的资源，移动图像文件到根目录，并将文件组织到指定的文件夹中。**请尽量使用 parrel.py，因为它的功能更完整和正确。main.py更倾向于测试。**

## 使用方法 🛠️

1. 自行设置目录结构：`Source`，`output`，`RePkg`。`Source`中存放的是创意工坊下载的带ID的文件夹。🗂️
2. 运行 `*.py` 脚本：此脚本会处理 Source 目录中的壁纸项目文件夹，并将处理结果输出到 output 目录。🔄
3. 并行处理：如果希望加速处理过程，可以使用 parrel.py 脚本，它会并行处理多个文件夹。🚀

**输出结果**：处理完成后，`output` 目录将包含组织好的子目录，包含提取的内容，`只`包括图像和视频文件。可以在 `spliter_folder` 函数中，通过配置 `special list` 和扩展名配置自定义的筛选方案。同时会自动`所有`删除空的文件夹和子文件夹。🗑️

## 配置项 ⚙️

按需要配置 `Source`，`Output` 和 `Repkg` 等路径。

* **contains**：该变量控制每个文件夹包含多少个项目。当文件夹中的项目达到指定数量时，将自动创建一个新的子文件夹。📁
* **图像大小限制**：脚本会将大于 `20KB(自行设定)` 图像文件移动到根目录，并删除小于此大小的文件。您可以根据需要调整此行为。⚖️

## 示例输出目录结构 📂

处理完成后，`output` 目录的结构可能如下所示：

```
output/
├── output0/
│   ├── group/
│   ├── mp4/
│   ├── selected/
├── output1/
│   ├── group/
│   ├── mp4/
│   ├── selected/
```

* **group**：包含多个图片文件的分组。📸
* **mp4**：包含视频文件（如果有的话）。🎥
* **selected**：只包含单独的壁纸选择。💎

## 故障排除 ⚠️

* **RePKG 提取失败**：确保 `RePKG.exe` 文件存在于正确的位置，并且您具有执行权限。🔑
* **文件输出混乱**：如果出现文件混乱的情况，请检查文件夹路径. 🛑

## 许可证 📝

该项目采用 MIT 许可证 - 详情请查看 LICENSE 文件。📜

### 说明

* **贡献**：Kan Liu 🤝
* **联系**：[lkbhg@outlook.com](mailto:lkbhg@outlook.com) 📧